{"data":{"template":"<sgdh:SGDHeader xmlns:sgdh=\"http://www.bssys.com/SMEV/WS/SGD/2\">\n\t<sgdh:Recipient>\n    \t<sgdh:Code>${request.deptId}</sgdh:Code>\n\t\t<sgdh:Name>${request.deptTitle}</sgdh:Name>\n\t</sgdh:Recipient>\n\t<sgdh:serviceCode>${request.serviceId}</sgdh:serviceCode>      \n</sgdh:SGDHeader>\n","form":{"root":true,"attributes":[{"errorMessage":"\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0439 \u0430\u0442\u0440\u0438\u0431\u0443\u0442: \u0417\u0430\u044F\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u043E\u0434\u0430\u0435\u0442:","errorClass":"com.pgg.s1.core.SchemaValidationException","appearance":"required","error":true,"name":"WhoThis","typeCfg":{"code":"remoteDict_c4d1ba29-b443-47a5-ba93-ebfda5ed31a3"},"label":"\u0417\u0430\u044F\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u043E\u0434\u0430\u0435\u0442:","script":"","typeClass":"com.pgg.portal.types.RemoteDictType","type":"ComplexType"},{"appearance":"normal","name":"\u0441hild","label":"\u0421\u0412\u0415\u0414\u0415\u041D\u0418\u042F \u041E \u0420\u0415\u0411\u0415\u041D\u041A\u0415","attributes":[{"appearance":"required","name":"child_birthday","label":"\u0414\u0430\u0442\u0430 \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F","hint":{"type":"date"},"type":"Date","script":"if (data.getClass() == String) throw new Exception(\"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 '\u041A\u0430\u043B\u0435\u043D\u0434\u0430\u0440\u044C' \u0434\u043B\u044F \u0432\u0432\u043E\u0434\u0430 \u0434\u0430\u0442\u044B\")"},{"appearance":"normal","name":"child_sex","typeCfg":{"code":"remoteDict_f9a98c74-9bac-4f28-996d-c82020ba058e"},"label":"\u041F\u043E\u043B","type":"ComplexType","typeClass":"com.pgg.portal.types.RemoteDictType"},{"appearance":"normal","name":"\u0441hild_fio","label":"\u041F\u0420\u0418\u0421\u0412\u041E\u0418\u0422\u042C \u041F\u0420\u0418 \u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u0426\u0418\u0418","attributes":[{"appearance":"required","name":"\u0441hild_surname","label":"\u0424\u0430\u043C\u0438\u043B\u0438\u044F","hint":{"type":"string"},"type":"String"},{"appearance":"required","name":"\u0441hild_firstname","label":"\u0418\u043C\u044F","hint":{"type":"string"},"type":"String"},{"appearance":"required","name":"\u0441hild_patronymic","label":"\u041E\u0442\u0447\u0435\u0441\u0442\u0432\u043E","hint":{"type":"string"},"type":"String"}],"type":"Map"},{"appearance":"normal","name":"\u0441hild_meddoc","label":"\u041C\u0415\u0414\u0418\u0426\u0418\u041D\u0421\u041A\u041E\u0415 \u0421\u0412\u0418\u0414\u0415\u0422\u0415\u041B\u042C\u0421\u0422\u0412\u041E \u041E \u0420\u041E\u0416\u0414\u0415\u041D\u0418\u0418","attributes":[{"appearance":"required","name":"\u0441hild_meddoc_series","label":"\u0421\u0435\u0440\u0438\u044F","hint":{"type":"string"},"type":"String"},{"appearance":"required","name":"\u0441hild_meddoc_number","label":"\u041D\u043E\u043C\u0435\u0440","hint":{"type":"string"},"type":"String"},{"appearance":"required","name":"\u0441hild_meddoc_date","label":"\u0414\u0430\u0442\u0430 \u0432\u044B\u0434\u0430\u0447\u0438","hint":{"type":"date"},"type":"Date","script":"if (data.getClass() == String) throw new Exception(\"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 '\u041A\u0430\u043B\u0435\u043D\u0434\u0430\u0440\u044C' \u0434\u043B\u044F \u0432\u0432\u043E\u0434\u0430 \u0434\u0430\u0442\u044B\")"}],"type":"Map"}],"type":"Map"},{"appearance":"nonPresent","name":"mother","label":"\u0421\u0412\u0415\u0414\u0415\u041D\u0418\u042F \u041E \u041C\u0410\u0422\u0415\u0420\u0418","attributes":[{"appearance":"required","name":"mother_surname","label":"\u0424\u0430\u043C\u0438\u043B\u0438\u044F","hint":{"type":"string"},"script":"","type":"String"},{"appearance":"required","name":"mother_firstname","label":"\u0418\u043C\u044F","hint":{"type":"string"},"type":"String"},{"appearance":"normal","name":"mother_patronymic","label":"\u041E\u0442\u0447\u0435\u0441\u0442\u0432\u043E","hint":{"type":"string"},"type":"String"},{"appearance":"required","name":"mother_birthday","label":"\u0414\u0430\u0442\u0430 \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F","hint":{"type":"date"},"type":"Date","script":"if (data.getClass() == String) throw new Exception(\"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 '\u041A\u0430\u043B\u0435\u043D\u0434\u0430\u0440\u044C' \u0434\u043B\u044F \u0432\u0432\u043E\u0434\u0430 \u0434\u0430\u0442\u044B\")"},{"appearance":"normal","name":"mother_snils","label":"\u0421\u041D\u0418\u041B\u0421","hint":{"mask":"999-999-999 99","type":"string"},"script":"","type":"String"},{"appearance":"required","name":"mother_placeofbirth","label":"\u041C\u0435\u0441\u0442\u043E \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F","hint":{"type":"string"},"type":"String"},{"appearance":"normal","name":"mother_certdocument","label":"\u0414\u041E\u041A\u0423\u041C\u0415\u041D\u0422, \u0423\u0414\u041E\u0421\u0422\u041E\u0412\u0415\u0420\u042F\u042E\u0429\u0418\u0419 \u041B\u0418\u0427\u041D\u041E\u0421\u0422\u042C","attributes":[{"appearance":"required","name":"mother_certdocument_doctype","typeCfg":{"code":"remoteDict_059d2a3f-1652-434a-a3a0-0fb8a79c0290"},"label":"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430","type":"ComplexType","typeClass":"com.pgg.portal.types.RemoteDictType"},{"appearance":"normal","name":"mother_certdocument_docseries","label":"\u0421\u0435\u0440\u0438\u044F","hint":{"type":"string"},"type":"String"},{"appearance":"required","name":"mother_certdocument_docnumber","label":"\u041D\u043E\u043C\u0435\u0440","hint":{"type":"string"},"type":"String"},{"appearance":"normal","name":"mother_certdocument_departmentcode","label":"\u041A\u043E\u0434 \u043F\u043E\u0434\u0440\u0430\u0437\u0434\u0435\u043B\u0435\u043D\u0438\u044F","hint":{"type":"string"},"type":"String"},{"appearance":"required","name":"mother_certdocument_docissuedate","hint":{"type":"date"},"label":"\u0414\u0430\u0442\u0430 \u0432\u044B\u0434\u0430\u0447\u0438","type":"Date","script":"if (data.getClass() == String) throw new Exception(\"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 '\u041A\u0430\u043B\u0435\u043D\u0434\u0430\u0440\u044C' \u0434\u043B\u044F \u0432\u0432\u043E\u0434\u0430 \u0434\u0430\u0442\u044B\")"},{"appearance":"normal","name":"mother_certdocument_stateissueauthority","label":"\u041A\u0435\u043C \u0432\u044B\u0434\u0430\u043D","hint":{"type":"string"},"type":"String"},{"appearance":"normal","name":"mother_certdocument_specialnote","label":"\u041E\u0441\u043E\u0431\u044B\u0435 \u043E\u0442\u043C\u0435\u0442\u043A\u0438","hint":{"type":"string"},"type":"String"}],"script":"","type":"Map"},{"appearance":"normal","name":"mother_address","typeCfg":{},"label":"\u0410\u0414\u0420\u0415\u0421 \u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u0426\u0418\u0418","typeClass":"com.pgg.portal.types.AddressType","type":"ComplexType","script":""}],"script":"if (com.pgg.s1.core.format.MapHelper.get(parent,'map.WhoThis.code') == \"1\")\n{ attr.appearance=\"normal\" \n}\nelse if (com.pgg.s1.core.format.MapHelper.get(parent,'map.WhoThis.code') == \"3\")\n{ attr.appearance=\"normal\" \n}\nelse\n{\n    attr.appearance=\"nonPresent\"\n}","type":"Map"},{"appearance":"nonPresent","name":"addfatherinfo","label":"\u0412\u043D\u0435\u0441\u0442\u0438 \u0441\u0432\u0435\u0434\u0435\u043D\u0438\u044F \u043E\u0431 \u043E\u0442\u0446\u0435","script":"if (com.pgg.s1.core.format.MapHelper.get(parent,'map.WhoThis.code') == \"2\")\n{ attr.appearance=\"normal\" \n}\nelse if (com.pgg.s1.core.format.MapHelper.get(parent,'map.WhoThis.code') == \"3\")\n{ attr.appearance=\"normal\" \n}\nelse\n{\n    attr.appearance=\"nonPresent\"\n}","type":"Boolean"},{"appearance":"nonPresent","name":"father","label":"\u0421\u0412\u0415\u0414\u0415\u041D\u0418\u042F \u041E\u0411 \u041E\u0422\u0426\u0415","attributes":[{"appearance":"required","name":"father_surname","label":"\u0424\u0430\u043C\u0438\u043B\u0438\u044F","hint":{"type":"string"},"script":"","type":"String"},{"appearance":"required","name":"father_firstname","label":"\u0418\u043C\u044F","hint":{"type":"string"},"type":"String"},{"appearance":"normal","name":"father_patronymic","label":"\u041E\u0442\u0447\u0435\u0441\u0442\u0432\u043E","hint":{"type":"string"},"type":"String"},{"appearance":"required","name":"father_birthday","label":"\u0414\u0430\u0442\u0430 \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F","hint":{"type":"date"},"type":"Date","script":"if (data.getClass() == String) throw new Exception(\"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 '\u041A\u0430\u043B\u0435\u043D\u0434\u0430\u0440\u044C' \u0434\u043B\u044F \u0432\u0432\u043E\u0434\u0430 \u0434\u0430\u0442\u044B\")"},{"appearance":"normal","name":"father_snils","label":"\u0421\u041D\u0418\u041B\u0421","hint":{"mask":"999-999-999 99","type":"string"},"script":"","type":"String"},{"appearance":"required","name":"father_placeofbirth","label":"\u041C\u0435\u0441\u0442\u043E \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F","hint":{"type":"string"},"type":"String"},{"appearance":"normal","name":"father_certdocument","label":"\u0414\u041E\u041A\u0423\u041C\u0415\u041D\u0422, \u0423\u0414\u041E\u0421\u0422\u041E\u0412\u0415\u0420\u042F\u042E\u0429\u0418\u0419 \u041B\u0418\u0427\u041D\u041E\u0421\u0422\u042C","attributes":[{"appearance":"required","name":"father_certdocument_doctype","typeCfg":{"code":"remoteDict_059d2a3f-1652-434a-a3a0-0fb8a79c0290"},"label":"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430","type":"ComplexType","typeClass":"com.pgg.portal.types.RemoteDictType"},{"appearance":"normal","name":"father_certdocument_docseries","label":"\u0421\u0435\u0440\u0438\u044F","hint":{"type":"string"},"type":"String"},{"appearance":"required","name":"father_certdocument_docnumber","label":"\u041D\u043E\u043C\u0435\u0440","hint":{"type":"string"},"type":"String"},{"appearance":"required","name":"father_certdocument_docissuedate","label":"\u0414\u0430\u0442\u0430 \u0432\u044B\u0434\u0430\u0447\u0438","hint":{"type":"date"},"type":"Date","script":"if (data.getClass() == String) throw new Exception(\"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 '\u041A\u0430\u043B\u0435\u043D\u0434\u0430\u0440\u044C' \u0434\u043B\u044F \u0432\u0432\u043E\u0434\u0430 \u0434\u0430\u0442\u044B\")"},{"appearance":"normal","name":"father_certdocument_departmentcode","label":"\u041A\u043E\u0434 \u043F\u043E\u0434\u0440\u0430\u0437\u0434\u0435\u043B\u0435\u043D\u0438\u044F","hint":{"type":"string"},"type":"String"},{"appearance":"normal","name":"father_certdocument_stateissueauthority","label":"\u041A\u0435\u043C \u0432\u044B\u0434\u0430\u043D","hint":{"type":"string"},"type":"String"},{"appearance":"normal","name":"father_certdocument_specialnote","label":"\u041E\u0441\u043E\u0431\u044B\u0435 \u043E\u0442\u043C\u0435\u0442\u043A\u0438","hint":{"type":"string"},"type":"String"}],"type":"Map"},{"appearance":"normal","name":"father_address","typeCfg":{},"label":"\u0410\u0414\u0420\u0415\u0421 \u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u0426\u0418\u0418","script":"","type":"ComplexType","typeClass":"com.pgg.portal.types.AddressType"}],"script":"if (parent.map.addfatherinfo ==true)\r\n{    attr.appearance=\"normal\"}\r\nelse\r\n{    attr.appearance=\"nonPresent\"}","type":"Map"},{"appearance":"normal","name":"married","label":"\u0420\u043E\u0434\u0438\u0442\u0435\u043B\u0438 \u0441\u043E\u0441\u0442\u043E\u044F\u0442 \u0432 \u0431\u0440\u0430\u043A\u0435","script":"","type":"Boolean"},{"appearance":"nonPresent","name":"docmarriage","label":"\u0420\u0415\u041A\u0412\u0418\u0417\u0418\u0422\u042B \u0421\u0412\u0418\u0414\u0415\u0422\u0415\u041B\u042C\u0421\u0422\u0412\u0410  \u041E \u0417\u0410\u041A\u041B\u042E\u0427\u0415\u041D\u0418\u0418 \u0411\u0420\u0410\u041A\u0410","attributes":[{"appearance":"required","name":"docmarriage_date","label":"\u0414\u0430\u0442\u0430 \u0437\u0430\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F \u0431\u0440\u0430\u043A\u0430","hint":{"type":"date"},"script":"if (data.getClass() == String) throw new Exception(\"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 '\u041A\u0430\u043B\u0435\u043D\u0434\u0430\u0440\u044C' \u0434\u043B\u044F \u0432\u0432\u043E\u0434\u0430 \u0434\u0430\u0442\u044B\")","type":"Date"},{"appearance":"normal","name":"docmarriage_numberact","label":"\u041D\u043E\u043C\u0435\u0440 \u0437\u0430\u043F\u0438\u0441\u0438 \u0430\u043A\u0442\u0430 \u043E \u0437\u0430\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0438 \u0431\u0440\u0430\u043A\u0430","hint":{"type":"string"},"type":"String"},{"appearance":"required","name":"docmarriage_placeregistration","label":"\u041C\u0435\u0441\u0442\u043E \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0431\u0440\u0430\u043A\u0430","hint":{"type":"string"},"type":"String"}],"script":"if (parent.map.married ==true){\r\n    attr.appearance=\"normal\"\r\n}\r\nelse\r\n{\r\n\r\n    attr.appearance = \"nonPresent\"\r\n\r\n}","type":"Map"},{"appearance":"normal","name":"registry","label":"\u0412\u042B\u0411\u041E\u0420 \u0417\u0410\u0413\u0421","attributes":[{"appearance":"normal","name":"registry_office","typeCfg":{"code":"remoteDict_66ae15bb-c5d7-4b62-84d1-3ea662d0a30b"},"label":"\u0417\u0410\u0413\u0421","type":"ComplexType","typeClass":"com.pgg.portal.types.RemoteDictType"},{"appearance":"normal","name":"doc_notification","label":"\u041A\u043E\u043F\u0438\u0438 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u043E\u0432 \u0431\u0443\u0434\u0443\u0442 \u043F\u0440\u0435\u0434\u043E\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u044B \u043B\u0438\u0447\u043D\u043E","type":"Boolean"},{"min":0,"element":{"attributes":[{"selected":false,"appearance":"normal","description":"\u042D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u0430\u044F \u043A\u043E\u043F\u0438\u044F \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430 \u0434\u043E\u043B\u0436\u043D\u0430 \u043F\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043B\u044F\u0442\u044C \u0441\u043E\u0431\u043E\u0439 \u043E\u0434\u0438\u043D \u0444\u0430\u0439\u043B \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 PDF, DOC, XLS, XLSX, JPG \u0438\u043B\u0438 ZIP, \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0449\u0438\u0439 \u043E\u0442\u0441\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0439 \u0433\u0440\u0430\u0444\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u043E\u0431\u0440\u0430\u0437 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044E\u0449\u0435\u0433\u043E \u0431\u0443\u043C\u0430\u0436\u043D\u043E\u0433\u043E \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430, \u0437\u0430\u0432\u0435\u0440\u0435\u043D\u043D\u043E\u0433\u043E \u043D\u0430\u0434\u043B\u0435\u0436\u0430\u0449\u0438\u043C \u043E\u0431\u0440\u0430\u0437\u043E\u043C \u0438 \u0441\u043D\u0430\u0431\u0436\u0435\u043D\u043D\u043E\u0433\u043E \u0432\u0441\u0435\u043C\u0438 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u044B\u043C\u0438 \u043F\u043E\u0434\u043F\u0438\u0441\u044F\u043C\u0438 \u0438 \u043F\u0435\u0447\u0430\u0442\u044F\u043C\u0438.","name":"load_doc_1","typeCfg":{},"label":"\u0414\u043E\u043A\u0443\u043C\u0435\u043D\u0442","type":"ComplexType","typeClass":"com.pgg.s1.core.types.FileType","script":""}],"type":"Map"},"appearance":"normal","max":20,"description":"\u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u043F\u043E \u0441\u043E\u0431\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u043C\u0443 \u0436\u0435\u043B\u0430\u043D\u0438\u044E \u043F\u0440\u0438\u043B\u043E\u0436\u0438\u0442\u044C \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u044B, \u0442\u0440\u0435\u0431\u0443\u0435\u043C\u044B\u0435 \u0434\u043B\u044F \u043E\u043A\u0430\u0437\u0430\u043D\u0438\u044F \u043D\u0430\u0441\u0442\u043E\u044F\u0449\u0435\u0439 \u0443\u0441\u043B\u0443\u0433\u0438 \u0432 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0441 \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u0438\u0432\u043D\u044B\u043C \u0440\u0435\u0433\u043B\u0430\u043C\u0435\u043D\u0442\u043E\u043C.\n\u041E\u0431\u044A\u0435\u043C \u0432\u0441\u0435\u0445 \u043F\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0435\u043C\u044B\u0445 \u0444\u0430\u0439\u043B\u043E\u0432 \u043D\u0435 \u0434\u043E\u043B\u0436\u0435\u043D \u043F\u0440\u0435\u0432\u044B\u0448\u0430\u0442\u044C 5 \u041C\u0431.","name":"applied_documents","label":"\u041F\u0420\u0418\u041B\u0410\u0413\u0410\u0415\u041C\u042B\u0415 \u0414\u041E\u041A\u0423\u041C\u0415\u041D\u0422\u042B","script":"if (parent.map.doc_notification ==true){\r\n    attr.appearance=\"nonPresent\"\r\n}\r\nelse\r\n{\r\n    attr.appearance=\"normal\"\r\n}","type":"List"}],"script":"","type":"Map"}]},"allowNonVerified":false,"before":{"script":"import com.pgg.portal.FileHelper\r\nimport com.pgg.s1.core.ClassResolver\r\nimport com.pgg.s1.core.storage.FileStorage\r\nimport org.apache.commons.io.IOUtils\r\nimport java.text.SimpleDateFormat\r\n\r\n// \u0444\u043E\u0440\u043C\u0438\u0440\u0443\u0435\u043C \u0442\u0438\u043F \u0437\u0430\u044F\u0432\u0438\u0442\u0435\u043B\u044F \u043F\u043E \u0428\u0428\r\ndef u = com.pgg.s1.core.UserResolver.getInstance().whoAmI();\r\ndef req = request.requestor\r\nswitch ( req.type ) {\r\ncase   'citizen'  :\r\n        if (req.id == \"me\") {\r\n    \t\ttypeRequestor = 'Fl' \r\n    \t\tbreak\r\n        }else if (req.id != \"me\") {\r\n            typeRequestor = 'Pfl' \r\n    \t\tbreak    \r\n        }else {\r\n            break\r\n        }\r\ncase  'businessman':\r\n\t\tif (req.id == \"me\") {\r\n    \t\ttypeRequestor = 'Ip' \r\n    \t\tbreak\r\n        }else if (req.id != \"me\") {\r\n            typeRequestor = 'Pip' \r\n    \t\tbreak    \r\n        }else {\r\n            break\r\n        }\r\n\t\tbreak\r\ncase 'organization':\r\n        typeRequestor = 'Ul'\r\n        break\r\n default:\r\n        typeRequestor = 'UNDEFINE'\r\n}\r\n\r\nctx.element = \"PutDocument\"\r\nctx.tns = \"http://www.red-soft.biz/ncore/dx/ws/smev-25\"\r\n//ctx.recipientCode = \"SGDVO11111\"\r\nctx.recipientCode = \"001204341\"\r\nctx.recipientName = \"\u0421\u0438\u0441\u0442\u0435\u043C\u0430 \u0433\u0430\u0440\u0430\u043D\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u043E\u0439 \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438 \u0441\u0442\u0440\u0443\u043A\u0442\u0443\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0445 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0439 \u0412\u043E\u043B\u0433\u043E\u0433\u0440\u0430\u0434\u0441\u043A\u043E\u0439 \u043E\u0431\u043B\u0430\u0441\u0442\u0438\"\r\nctx.originatorCode = \"PGU_SYS_1\"\r\nctx.originatorName = \"\u0420\u041F\u0413\u0423 \u0412\u043E\u043B\u0433\u043E\u0433\u0440\u0430\u0434\u0441\u043A\u043E\u0439 \u043E\u0431\u043B\u0430\u0441\u0442\u0438\"\r\nctx.senderCode = \"PGU_SYS_1\"\r\nctx.senderName = \"\u0420\u041F\u0413\u0423 \u0412\u043E\u043B\u0433\u043E\u0433\u0440\u0430\u0434\u0441\u043A\u043E\u0439 \u043E\u0431\u043B\u0430\u0441\u0442\u0438\"\r\nctx.mustSignXml = true;\r\nctx.mustSignFiles = true;\r\nctx.files = [];\r\n\r\n//\u041F\u0420\u041E\u0412\u0415\u0420\u041A\u0410 \u041F\u041E\u041B\u0415\u0419 \u041D\u0410 \u0412\u041A\u041B\u0410\u0414\u041A\u0415 \u0414\u0410\u041D\u041D\u042B\u0415 \u0417\u0410\u042F\u0412\u0418\u0422\u0415\u041B\u042F\r\nif (typeRequestor == \"Fl\"){\r\n if(!request.requestor.data.phone)\r\n  throw new Exception(\"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D \u0442\u0435\u043B\u0435\u0444\u043E\u043D\");\r\n\t   \r\nif(!request.requestor.data.birthDate) \r\n\t  throw new Exception(\"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430 \u0434\u0430\u0442\u0430 \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F\");\r\n \r\nif(!request.requestor.data.snils) \r\n\t  throw new Exception(\"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D \u0421\u041D\u0418\u041B\u0421\");\t  \r\n\r\nif(!request.requestor.data.inn) \r\n\t  throw new Exception(\"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D \u0418\u041D\u041D\");\r\n\r\ndef per =\"\"\"${request.requestor.data.inn}\"\"\";\r\nint len = per.length();\r\nif (len != 12) \r\n\t  throw new Exception(\"\u0418\u041D\u041D \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043A\u043E\u0433\u043E \u043B\u0438\u0446\u0430 \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C \u0446\u0438\u0444\u0440\");\r\n\r\nif(!request.requestor.data.passport?.series) \r\n\t  throw new Exception(\"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430 \u0441\u0435\u0440\u0438\u044F \u043F\u0430\u0441\u043F\u043E\u0440\u0442\u0430\");\t\r\n\r\n\r\nif(!request.requestor.data.passport?.number) \r\n\t  throw new Exception(\"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430 \u043D\u043E\u043C\u0435\u0440 \u043F\u0430\u0441\u043F\u043E\u0440\u0442\u0430\");\t\r\n\r\nif(!request.requestor.data.passport?.date) \r\n\t  throw new Exception(\"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430 \u0434\u0430\u0442\u0430 \u0432\u044B\u0434\u0430\u0447\u0438 \u043F\u0430\u0441\u043F\u043E\u0440\u0442\u0430\");\r\n\t   \r\nif(!request.requestor.data.passport?.dept) \r\n\t  throw new Exception(\"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u043E \u043D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435 \u043E\u0440\u0433\u0430\u043D\u0430 \u0432\u044B\u0434\u0430\u0432\u0448\u0435\u0433\u043E \u043F\u0430\u0441\u043F\u043E\u0440\u0442\");\r\n}\t\r\n\r\nelse if (typeRequestor == \"Pfl\"){\r\n if(!request.requestor.data.phone)\r\n  throw new Exception(\"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D \u0442\u0435\u043B\u0435\u0444\u043E\u043D\");\r\n\t   \r\nif(!request.requestor.data.birthDate) \r\n\t  throw new Exception(\"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430 \u0434\u0430\u0442\u0430 \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F\");\r\n \r\nif(!request.requestor.data.snils) \r\n\t  throw new Exception(\"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D \u0421\u041D\u0418\u041B\u0421\");\t  \r\n\r\nif(!request.requestor.data.inn) \r\n\t  throw new Exception(\"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D \u0418\u041D\u041D\");\r\n\r\ndef per =\"\"\"${request.requestor.data.inn}\"\"\";\r\nint len = per.length();\r\nif (len != 12) \r\n\t  throw new Exception(\"\u0418\u041D\u041D \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043A\u043E\u0433\u043E \u043B\u0438\u0446\u0430 \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C \u0446\u0438\u0444\u0440\");\r\n\r\nif(!request.requestor.data.passport?.series) \r\n\t  throw new Exception(\"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430 \u0441\u0435\u0440\u0438\u044F \u043F\u0430\u0441\u043F\u043E\u0440\u0442\u0430\");\t\r\n\r\n\r\nif(!request.requestor.data.passport?.number) \r\n\t  throw new Exception(\"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430 \u043D\u043E\u043C\u0435\u0440 \u043F\u0430\u0441\u043F\u043E\u0440\u0442\u0430\");\t\r\n\r\nif(!request.requestor.data.passport?.date) \r\n\t  throw new Exception(\"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430 \u0434\u0430\u0442\u0430 \u0432\u044B\u0434\u0430\u0447\u0438 \u043F\u0430\u0441\u043F\u043E\u0440\u0442\u0430\");\r\n\t   \r\nif(!request.requestor.data.passport?.dept) \r\n\t  throw new Exception(\"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u043E \u043D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435 \u043E\u0440\u0433\u0430\u043D\u0430 \u0432\u044B\u0434\u0430\u0432\u0448\u0435\u0433\u043E \u043F\u0430\u0441\u043F\u043E\u0440\u0442\");\r\n}\t\r\n\r\nelse if (typeRequestor == \"Ul\"){\r\n\r\nif(!request.requestor.data.inn) \r\n\t  throw new Exception(\"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D \u0418\u041D\u041D\");\r\n\r\ndef inn =\"\"\"${request.requestor.data.inn}\"\"\";\r\nint len = inn.length();\r\nif (len != 10) \r\n\t  throw new Exception(\"\u0418\u041D\u041D \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043A\u043E\u0433\u043E \u043B\u0438\u0446\u0430 \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0434\u0435\u0441\u044F\u0442\u044C \u0446\u0438\u0444\u0440\");\r\n\t  \r\nif(!request.requestor.data.ogrn) \r\n\t  throw new Exception(\"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D \u041E\u0413\u0420\u041D\");\r\n\r\ndef ogrn =\"\"\"${request.requestor.data.ogrn}\"\"\";\r\nint lenOGRN = ogrn.length();\r\nif (lenOGRN != 13) \r\n\t  throw new Exception(\"\u041E\u0413\u0420\u041D \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u044C \u0446\u0438\u0444\u0440\");\r\n}\r\n\r\n/*\u0444\u0443\u043D\u043A\u0446\u0438\u044F \u0432\u0441\u0442\u0430\u0432\u043A\u0438 \u0434\u0430\u0442\u044B*/\r\ndef date_format = {name,dt,format->\r\nif(dt){\r\n\treturn \"<${name}>\"+dt.format(format)+\"</${name}>\";\r\n}\r\nreturn '';\r\n}\r\n\r\n\r\ndef xml_test = \"\";\r\ndef xmlClone\r\ndef address = \"\";\r\ndef requestor = request.requestor;\r\ndef father = null;\r\ndef mother = null;\r\n/*\u0421\u0412\u0415\u0414\u0415\u041D\u0418\u042F \u041E\u0411 \u041E\u0422\u0426\u0415*/\r\n\r\nif (com.pgg.s1.core.format.MapHelper.get(request,'data.WhoThis.code') == \"1\"){ \r\nfather = \"\"\"\r\n<tns:father>\r\n\t<father_surname>${requestor.data.name?.name?:''}</father_surname>\r\n\t<father_firstname>${requestor.data.name?.surname?:''}</father_firstname>\r\n\t<father_patronymic>${requestor.data.name?.patronymic?:''}</father_patronymic>\r\n\t${date_format('father_birthday',requestor.data.birthDate?:null,\"yyyy-MM-dd\")}\r\n\t<father_snils>${requestor.data.snils}</father_snils>\r\n\t<tns:father_certdocument>\r\n\t\t<father_certdocument_doctype>\u043F\u0430\u0441\u043F\u043E\u0440\u0442</father_certdocument_doctype>\r\n\t\t<father_certdocument_docseries>${requestor.data.passport?.series?:''}</father_certdocument_docseries>\r\n\t\t<father_certdocument_docnumber>${requestor.data.passport?.number?:''}</father_certdocument_docnumber>\r\n\t\t${date_format('father_certdocument_docissuedate',requestor.data.passport?.date?:null,\"yyyy-MM-dd\")}\r\n\t\t<father_certdocument_departmentcode>${requestor.data.passport?.dept?:''}</father_certdocument_departmentcode>\r\n\t</tns:father_certdocument>\r\n\t<tns:father_address>\r\n\t\t\t\t<ZIPCode>${request.requestor.data.address?.index?:''}</ZIPCode>\r\n                <region>${request.requestor.data.address?.region?:''}</region>\r\n                <city>${request.requestor.data.address?.city?:''}</city>\r\n                <village>${request.requestor.data.address?.town?:''}</village>\r\n                <street>${request.requestor.data.address?.street?:''}</street>\r\n                <house>${request.requestor.data.address?.house?:''}</house>\r\n                <block>${request.requestor.data.address?.building?:''}</block>\r\n                <flat>${request.requestor.data.address?.flat?:''}</flat>\r\n\t</tns:father_address>\t\r\n</tns:father>\t\t\t\t\r\n\"\"\";}\r\nelse{\r\nif (request.data.addfatherinfo ==true){\r\nfather = \"\"\"\r\n<tns:father>\r\n\t<father_surname>${request.data.father?.father_surname?:''}</father_surname>\r\n\t<father_firstname>${request.data.father?.father_firstname?:''}</father_firstname>\r\n\t<father_patronymic>${request.data.father?.father_patronymic?:''}</father_patronymic>\r\n\t${date_format('father_birthday',request.data.father.father_birthday?:null,\"yyyy-MM-dd\")}\r\n\t<father_snils>${request.data.father?.father_snils?:''}</father_snils>\r\n\t<father_placeofbirth>${request.data.father?.father_placeofbirth?:''}</father_placeofbirth>\r\n\t<tns:father_certdocument>\t\t\r\n\t\t<father_certdocument_doctype>${request.data.father?.father_certdocument?.father_certdocument_doctype?.title?:''}</father_certdocument_doctype>\t\t\r\n\t\t<father_certdocument_docseries>${request.data.father?.father_certdocument?.father_certdocument_docseries?:''}</father_certdocument_docseries>\r\n\t\t<father_certdocument_docnumber>${request.data.father?.father_certdocument?.father_certdocument_docnumber?:''}</father_certdocument_docnumber>\t\t\r\n\t\t${date_format('father_certdocument_docissuedate',request.data.father?.father_certdocument?.father_certdocument_docissuedate?:null,\"yyyy-MM-dd\")}\t\t\r\n\t\t<father_certdocument_departmentcode>${request.data.father?.father_certdocument?.father_certdocument_departmentcode?:''}</father_certdocument_departmentcode>\r\n\t\t<father_certdocument_stateissueauthority>${request.data.father?.father_certdocument?.father_certdocument_stateissueauthority?:''}</father_certdocument_stateissueauthority>\r\n\t\t<father_certdocument_specialnote>${request.data.father?.father_certdocument?.father_certdocument_specialnote?:''}</father_certdocument_specialnote>\r\n\t</tns:father_certdocument>\r\n\t<tns:father_address>\r\n\t\t\t\t<ZIPCode>${request.data.father.father_address?.index?:''}</ZIPCode>\r\n                <region>${request.data.father.father_address?.region?:''}</region>\r\n                <city>${request.data.father.father_address?.city?:''}</city>\r\n                <village>${request.data.father.father_address?.town?:''}</village>\r\n                <street>${request.data.father.father_address?.street?:''}</street>\r\n                <house>${request.data.father.father_address?.house?:''}</house>\r\n                <block>${request.data.father.father_address?.building?:''}</block>\r\n                <flat>${request.data.father.father_address?.flat?:''}</flat>\r\n\t</tns:father_address>\t\r\n</tns:father>\t\t\t\t\r\n\"\"\";}\r\nelse {\r\nfather = \"\"\"\r\n<tns:father>\u0421\u0432\u0435\u0434\u0435\u043D\u0438\u044F \u043E\u0431 \u043E\u0442\u0446\u0435 \u043D\u0435 \u0437\u0430\u043F\u043E\u043B\u043D\u044F\u0442\u044C</tns:father>\r\n\"\"\";}\r\n}\r\n\r\n/*\u0421\u0412\u0415\u0414\u0415\u041D\u0418\u042F \u041E \u041C\u0410\u0422\u0415\u0420\u0418*/\r\n\r\nif (com.pgg.s1.core.format.MapHelper.get(request,'data.WhoThis.code') == \"2\"){ \r\nmother = \"\"\"\r\n<tns:mother>\r\n\t<mother_surname>${requestor.data.name?.name?:''}</mother_surname>\r\n\t<mother_firstname>${requestor.data.name?.surname?:''}</mother_firstname>\r\n\t<mother_patronymic>${requestor.data.name?.patronymic?:''}</mother_patronymic>\r\n\t${date_format('mother_birthday',requestor.data.birthDate?:null,\"yyyy-MM-dd\")}\r\n\t<mother_snils>${requestor.data.snils}</mother_snils>\r\n\t<tns:mother_certdocument>\r\n\t\t<mother_certdocument_doctype>\u043F\u0430\u0441\u043F\u043E\u0440\u0442</mother_certdocument_doctype>\r\n\t\t<mother_certdocument_docseries>${requestor.data.passport?.series?:''}</mother_certdocument_docseries>\r\n\t\t<mother_certdocument_docnumber>${requestor.data.passport?.number?:''}</mother_certdocument_docnumber>\r\n\t\t${date_format('mother_certdocument_docissuedate',requestor.data.passport?.date?:null,\"yyyy-MM-dd\")}\r\n\t\t<mother_certdocument_departmentcode>${requestor.data.passport?.dept?:''}</mother_certdocument_departmentcode>\r\n\t</tns:mother_certdocument>\r\n\t<tns:mother_address>\r\n\t\t\t\t<ZIPCode>${request.requestor.data.address?.index?:''}</ZIPCode>\r\n                <region>${request.requestor.data.address?.region?:''}</region>\r\n                <city>${request.requestor.data.address?.city?:''}</city>\r\n                <village>${request.requestor.data.address?.town?:''}</village>\r\n                <street>${request.requestor.data.address?.street?:''}</street>\r\n                <house>${request.requestor.data.address?.house?:''}</house>\r\n                <block>${request.requestor.data.address?.building?:''}</block>\r\n                <flat>${request.requestor.data.address?.flat?:''}</flat>\r\n\t</tns:mother_address>\t\r\n</tns:mother>\t\t\t\t\r\n\"\"\";}\r\nelse{\r\nmother = \"\"\"\r\n<tns:mother>\r\n\t<mother_surname>${request.data.mother?.mother_surname?:''}</mother_surname>\r\n\t<mother_firstname>${request.data.mother?.mother_firstname?:''}</mother_firstname>\r\n\t<mother_patronymic>${request.data.mother?.mother_patronymic?:''}</mother_patronymic>\r\n\t${date_format('mother_birthday',request.data.mother.mother_birthday?:null,\"yyyy-MM-dd\")}\r\n\t<mother_snils>${request.data.mother?.mother_snils?:''}</mother_snils>\r\n\t<mother_placeofbirth>${request.data.mother?.mother_placeofbirth?:''}</mother_placeofbirth>\r\n\t<tns:mother_certdocument>\t\t\r\n\t\t<mother_certdocument_doctype>${request.data.mother?.mother_certdocument?.mother_certdocument_doctype?.title?:''}</mother_certdocument_doctype>\t\t\r\n\t\t<mother_certdocument_docseries>${request.data.mother?.mother_certdocument?.mother_certdocument_docseries?:''}</mother_certdocument_docseries>\r\n\t\t<mother_certdocument_docnumber>${request.data.mother?.mother_certdocument?.mother_certdocument_docnumber?:''}</mother_certdocument_docnumber>\t\t\r\n\t\t${date_format('mother_certdocument_docissuedate',request.data.mother?.mother_certdocument?.mother_certdocument_docissuedate?:null,\"yyyy-MM-dd\")}\t\t\r\n\t\t<mother_certdocument_departmentcode>${request.data.mother?.mother_certdocument?.mother_certdocument_departmentcode?:''}</mother_certdocument_departmentcode>\r\n\t\t<mother_certdocument_stateissueauthority>${request.data.mother?.mother_certdocument?.mother_certdocument_stateissueauthority?:''}</mother_certdocument_stateissueauthority>\r\n\t\t<mother_certdocument_specialnote>${request.data.mother?.mother_certdocument?.mother_certdocument_specialnote?:''}</mother_certdocument_specialnote>\r\n\t</tns:mother_certdocument>\r\n\t<tns:mother_address>\r\n\t\t\t\t<ZIPCode>${request.data.mother.mother_address?.index?:''}</ZIPCode>\r\n                <region>${request.data.mother.mother_address?.region?:''}</region>\r\n                <city>${request.data.mother.mother_address?.city?:''}</city>\r\n                <village>${request.data.mother.mother_address?.town?:''}</village>\r\n                <street>${request.data.mother.mother_address?.street?:''}</street>\r\n                <house>${request.data.mother.mother_address?.house?:''}</house>\r\n                <block>${request.data.mother.mother_address?.building?:''}</block>\r\n                <flat>${request.data.mother.mother_address?.flat?:''}</flat>\r\n\t</tns:mother_address>\t\r\n</tns:mother>\t\t\t\t\r\n\"\"\";}\r\n\r\ncontextData=\"\"\"\r\n\t\t\t<tns:contextData>\r\n\t\t\t\t<tns:\u0441hild>\r\n\t\t\t\t\t${date_format('child_birthday',request.data.\u0441hild.child_birthday?:null,\"yyyy-MM-dd\")}\r\n\t\t\t\t\t<child_sex>${request.data.\u0441hild.child_sex?.title?:''}</child_sex>\r\n\t\t\t\t\t<tns:\u0441hild_fio>\r\n\t\t\t\t\t\t<\u0441hild_surname>${request.data.\u0441hild.\u0441hild_fio.\u0441hild_surname?:''}</\u0441hild_surname>\r\n\t\t\t\t\t\t<\u0441hild_firstname>${request.data.\u0441hild.\u0441hild_fio.\u0441hild_firstname?:''}</\u0441hild_firstname>\r\n\t\t\t\t\t\t<\u0441hild_patronymic>${request.data.\u0441hild.\u0441hild_fio.\u0441hild_patronymic?:''}</\u0441hild_patronymic>\t\r\n\t\t\t\t\t</tns:\u0441hild_fio>\r\n\t\t\t\t\t<tns:\u0441hild_meddoc>\r\n\t\t\t\t\t\t<\u0441hild_meddoc_series>${request.data.\u0441hild.\u0441hild_meddoc.\u0441hild_meddoc_series?:''}</\u0441hild_meddoc_series>\r\n\t\t\t\t\t\t<\u0441hild_meddoc_number>${request.data.\u0441hild.\u0441hild_meddoc.\u0441hild_meddoc_number?:''}</\u0441hild_meddoc_number>\r\n\t\t\t\t\t\t${date_format('\u0441hild_meddoc_date',request.data.\u0441hild.\u0441hild_meddoc.\u0441hild_meddoc_date?:null,\"yyyy-MM-dd\")}\r\n\t\t\t\t\t</tns:\u0441hild_meddoc>\t\t\t\t\t\r\n\t\t\t\t</tns:\u0441hild>\r\n\t\t\t\t${father}\r\n\t\t\t\t${mother}\r\n\t\t\t\t<tns:docmarriage>\"\"\";\r\n\t\t\t\tif(com.pgg.s1.core.format.MapHelper.get(request,'data.docmarriage.docmarriage_date')){\t\t\t\r\n\t\t\tcontextData+=\"\"\"\r\n\t\t\t\t\t${date_format('docmarriage_date',request.data.docmarriage.docmarriage_date?:null,\"yyyy-MM-dd\")}\r\n\t\t\t\t\"\"\";}\r\n\t\t\t\t\t\telse {\r\n\t\t\tcontextData+=\"\"\"\t\t\r\n\t\t\t\t\t<docmarriage_date></docmarriage_date>\"\"\";}\r\n\t\t\tcontextData+=\"\"\"\t\t\r\n\t\t\t\t\t<docmarriage_numberact>${request.data.docmarriage?.docmarriage_numberact?:''}</docmarriage_numberact>\r\n\t\t\t\t\t<docmarriage_placeregistration>${request.data.docmarriage?.docmarriage_placeregistration?:''}</docmarriage_placeregistration>\r\n\t\t\t\t</tns:docmarriage>\r\n\t\t\t\t<tns:registry>\r\n\t\t\t\t\t<registry_office>${request.data.registry?.registry_office?.title?:''}</registry_office>\r\n\t\t\t\t</tns:registry>\r\n\t\t\t\t\r\n           </tns:contextData> \r\n\"\"\";\r\n\r\ndef Representative=\"\"\"\r\n\t\t\t<tns:Representative>\r\n\t\t\t\t<tns:FIO>\r\n\t\t\t\t\t<tns:name>${u.name?.name?:''}</tns:name>\r\n\t\t\t\t\t<tns:surname>${u.name?.surname?:''}</tns:surname>\r\n\t\t\t\t\t<tns:patronymic>${u.name?.patronymic?:''}</tns:patronymic>\r\n\t\t\t\t</tns:FIO>\t\r\n\t\t\t\t${date_format('tns:birthday',u?.birthDate?:null,\"yyyy-MM-dd\")}\r\n\t\t\t\t<tns:SNILS>${u.snils?:''}</tns:SNILS>\r\n\t\t\t\t<tns:INN>${u.inn?:''}</tns:INN>\r\n\t\t\t\t<tns:certDocument>\r\n\t\t\t\t\t<tns:typeCode>\u043F\u0430\u0441\u043F\u043E\u0440\u0442</tns:typeCode>\r\n\t\t\t\t\t<tns:series>${u.passport?.series?:''}</tns:series>\r\n\t\t\t\t\t<tns:number>${u.passport?.number?:''}</tns:number>\r\n\t\t\t\t\t${date_format('tns:date',u.passport?.date?:null,\"yyyy-MM-dd\")}\t\r\n\t\t\t\t\t<tns:departmentCode>${u.passport?.dept?:''}</tns:departmentCode>\r\n\t\t\t\t</tns:certDocument>\r\n\t\t\t\t<tns:AddressReg>\r\n\t\t\t\t\t<tns:ZIPCode>${u.address?.index?:''}</tns:ZIPCode>\r\n\t\t\t\t\t<tns:region>${u.address?.region?:''}</tns:region>\r\n\t\t\t\t\t<tns:city>${u.address?.city?:''}</tns:city>\r\n\t\t\t\t\t<tns:village>${u.address?.town?:''}</tns:village>\r\n\t\t\t\t\t<tns:street>${u.address?.street?:''}</tns:street>\r\n\t\t\t\t\t<tns:house>${u.address?.house?:''}</tns:house>\r\n\t\t\t\t\t<tns:block>${u.address?.building?:''}</tns:block>\r\n\t\t\t\t\t<tns:flat>${u.address?.flat?:''}</tns:flat>\r\n\t\t\t\t</tns:AddressReg>\r\n\t\t\t\t<tns:AddressActual>\r\n\t\t\t\t\t<tns:ZIPCode>${u.factAddress?.index?:''}</tns:ZIPCode>\r\n\t\t\t\t\t<tns:region>${u.factAddress?.region?:''}</tns:region>\r\n\t\t\t\t\t<tns:city>${u.factAddress?.city?:''}</tns:city>\r\n\t\t\t\t\t<tns:village>${u.factAddress?.town?:''}</tns:village>\r\n\t\t\t\t\t<tns:street>${u.factAddress?.street?:''}</tns:street>\r\n\t\t\t\t\t<tns:house>${u.factAddress?.house?:''}</tns:house>\r\n\t\t\t\t\t<tns:block>${u.factAddress?.building?:''}</tns:block>\r\n\t\t\t\t\t<tns:flat>${u.factAddress?.flat?:''}</tns:flat>\r\n\t\t\t\t</tns:AddressActual>\r\n\t\t\t\t<tns:Phone>${u.phone?:''}</tns:Phone>\r\n\t\t\t\t<tns:Fax></tns:Fax>\r\n\t\t\t\t<tns:eMail>${u.email?:''}</tns:eMail>\r\n\t\t\t</tns:Representative>\r\n\"\"\";\r\n\r\nif (typeRequestor == \"Fl\"){\r\n    xml_test = \"\"\"\r\n     <fed:FormData>\r\n     <tns:IQEpguVlgUSL24${typeRequestor} xmlns:tns=\"http://www.red-soft.biz/schemas/shgate/common/2011/0.5\" xmlns:BSSEST=\"http://www.bssys.com/BSSTypes_20120606\" ApplicantType=\"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043B\u0438\u0446\u043E\">        \r\n        <tns:OKTMO>18701000</tns:OKTMO>\r\n        <tns:applicantDataFL>\r\n\t\t\t<tns:deptTitle>${request.deptTitle}</tns:deptTitle>\r\n            <tns:FIO>\r\n                <tns:name>${requestor.data.name?.name?:''}</tns:name>\r\n                <tns:surname>${requestor.data.name?.surname?:''}</tns:surname>\r\n                <tns:patronymic>${requestor.data.name?.patronymic?:''}</tns:patronymic>\r\n            </tns:FIO>\t\t\t\r\n            <tns:birthday>${requestor.data.birthDate.format(\"yyyy-MM-dd\")}</tns:birthday>\r\n            <tns:SNILS>${requestor.data.snils?:''}</tns:SNILS>\r\n            <tns:INN>${requestor.data.inn?:''}</tns:INN>\r\n            <tns:certDocument>\r\n                <tns:typeCode>\u043F\u0430\u0441\u043F\u043E\u0440\u0442</tns:typeCode>\r\n                <tns:series>${requestor.data.passport?.series?:''}</tns:series>\r\n                <tns:number>${requestor.data.passport?.number?:''}</tns:number>\r\n                <tns:issueDate>${requestor.data.passport.date.format(\"yyyy-MM-dd\")}</tns:issueDate>\r\n\t\t\t\t<tns:departmentCode>${requestor.data.passport?.dept?:''}</tns:departmentCode>\r\n            </tns:certDocument>\r\n            <tns:AddressReg>\r\n                <tns:ZIPCode>${request.requestor.data.address?.index?:''}</tns:ZIPCode>\r\n                <tns:region>${request.requestor.data.address?.region?:''}</tns:region>\r\n                <tns:city>${request.requestor.data.address?.city?:''}</tns:city>\r\n                <tns:village>${request.requestor.data.address?.town?:''}</tns:village>\r\n                <tns:street>${request.requestor.data.address?.street?:''}</tns:street>\r\n                <tns:house>${request.requestor.data.address?.house?:''}</tns:house>\r\n                <tns:block>${request.requestor.data.address?.building?:''}</tns:block>\r\n                <tns:flat>${request.requestor.data.address?.flat?:''}</tns:flat>\r\n            </tns:AddressReg>\r\n            <tns:AddressActual>\r\n                <tns:ZIPCode>${request.requestor.data.factAddress?.index?:''}</tns:ZIPCode>\r\n                <tns:region>${request.requestor.data.factAddress?.region?:''}</tns:region>\r\n                <tns:city>${request.requestor.data.factAddress?.city?:''}</tns:city>\r\n                <tns:village>${request.requestor.data.factAddress?.town?:''}</tns:village>\r\n                <tns:street>${request.requestor.data.factAddress?.street?:''}</tns:street>\r\n                <tns:house>${request.requestor.data.factAddress?.house?:''}</tns:house>\r\n                <tns:block>${request.requestor.data.factAddress?.building?:''}</tns:block>\r\n                <tns:flat>${request.requestor.data.factAddress?.flat?:''}</tns:flat>\r\n            </tns:AddressActual>\r\n            <tns:Phone>${requestor.data.phone?:''}</tns:Phone>\r\n            <tns:eMail>${requestor.data.email?:''}</tns:eMail>            \r\n            ${contextData}         \r\n        </tns:applicantDataFL> \r\n    </tns:IQEpguVlgUSL24${typeRequestor}>\r\n    </fed:FormData>\r\n    \"\"\";\r\n}else if (typeRequestor == \"Pfl\"){\r\n     xml_test = \"\"\"\r\n    <fed:FormData>\r\n    <tns:IQEpguVlgUSL24${typeRequestor} xmlns:tns=\"http://www.red-soft.biz/schemas/shgate/common/2011/0.5\" xmlns:BSSEST=\"http://www.bssys.com/BSSTypes_20120606\" ApplicantType=\"\u041F\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u0442\u0435\u043B\u044C \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043A\u043E\u0433\u043E \u043B\u0438\u0446\u0430\">\r\n\t\t<tns:OKTMO>18701000</tns:OKTMO>\r\n\t\t<tns:applicantDataPfl>\r\n\t\t\t<tns:deptTitle>${request.deptTitle}</tns:deptTitle>\r\n\t\t\t<tns:FIO>\r\n                <tns:name>${requestor.data.name?.name?:''}</tns:name>\r\n                <tns:surname>${requestor.data.name?.surname?:''}</tns:surname>\r\n                <tns:patronymic>${requestor.data.name?.patronymic?:''}</tns:patronymic>\r\n            </tns:FIO>\t\t\t\r\n            <tns:birthday>${requestor.data.birthDate.format(\"yyyy-MM-dd\")}</tns:birthday>\r\n            <tns:SNILS>${requestor.data.snils?:''}</tns:SNILS>\r\n            <tns:INN>${requestor.data.inn?:''}</tns:INN>\r\n            <tns:certDocument>\r\n                <tns:typeCode>\u043F\u0430\u0441\u043F\u043E\u0440\u0442</tns:typeCode>\r\n                <tns:series>${requestor.data.passport?.series?:''}</tns:series>\r\n                <tns:number>${requestor.data.passport?.number?:''}</tns:number>\r\n                <tns:issueDate>${requestor.data.passport.date.format(\"yyyy-MM-dd\")}</tns:issueDate>\r\n\t\t\t\t<tns:departmentCode>${requestor.data.passport?.dept?:''}</tns:departmentCode>\r\n            </tns:certDocument>\r\n            <tns:AddressReg>\r\n                <tns:ZIPCode>${request.requestor.data.address?.index?:''}</tns:ZIPCode>\r\n                <tns:region>${request.requestor.data.address?.region?:''}</tns:region>\r\n                <tns:city>${request.requestor.data.address?.city?:''}</tns:city>\r\n                <tns:village>${request.requestor.data.address?.town?:''}</tns:village>\r\n                <tns:street>${request.requestor.data.address?.street?:''}</tns:street>\r\n                <tns:house>${request.requestor.data.address?.house?:''}</tns:house>\r\n                <tns:block>${request.requestor.data.address?.building?:''}</tns:block>\r\n                <tns:flat>${request.requestor.data.address?.flat?:''}</tns:flat>\r\n            </tns:AddressReg>\r\n            <tns:AddressActual>\r\n                <tns:ZIPCode>${request.requestor.data.factAddress?.index?:''}</tns:ZIPCode>\r\n                <tns:region>${request.requestor.data.factAddress?.region?:''}</tns:region>\r\n                <tns:city>${request.requestor.data.factAddress?.city?:''}</tns:city>\r\n                <tns:village>${request.requestor.data.factAddress?.town?:''}</tns:village>\r\n                <tns:street>${request.requestor.data.factAddress?.street?:''}</tns:street>\r\n                <tns:house>${request.requestor.data.factAddress?.house?:''}</tns:house>\r\n                <tns:block>${request.requestor.data.factAddress?.building?:''}</tns:block>\r\n                <tns:flat>${request.requestor.data.factAddress?.flat?:''}</tns:flat>\r\n            </tns:AddressActual>\r\n            <tns:Phone>${requestor.data.phone?:''}</tns:Phone>\r\n            <tns:eMail>${requestor.data.email?:''}</tns:eMail>\r\n\t\t\t${Representative}\r\n\t\t\t${contextData}\t\t\t\r\n        </tns:applicantDataPfl>\r\n    </tns:IQEpguVlgUSL24${typeRequestor}>\r\n    </fed:FormData>\r\n    \"\"\";\r\n}\r\nelse if (typeRequestor == \"Ul\"){\r\n     xml_test = \"\"\"\r\n    <fed:FormData>\r\n    <tns:IQEpguVlgUSL24${typeRequestor} xmlns:tns=\"http://www.red-soft.biz/schemas/shgate/common/2011/0.5\" xmlns:BSSEST=\"http://www.bssys.com/BSSTypes_20120606\" ApplicantType=\"\u042E\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043B\u0438\u0446\u043E\">\r\n\t\t<tns:OKTMO>18701000</tns:OKTMO>\r\n\t\t<tns:applicantDataUl>\r\n\t\t\t<tns:deptTitle>${request.deptTitle}</tns:deptTitle>\r\n\t\t\t<tns:fullTitle>${requestor.data.fullTitle?:''}</tns:fullTitle>\r\n            <tns:ShortName>${requestor.data.title?:''}</tns:ShortName>\r\n            <tns:BrandtName>${requestor.data.firmTitle?:''}</tns:BrandtName>\r\n            <tns:INN>${requestor.data.inn?:''}</tns:INN>\r\n            <tns:OGRN>${requestor.data.ogrn?:''}</tns:OGRN>\r\n\t\t\t<tns:post>${requestor.data.post?:''}</tns:post>\r\n            <tns:address>\r\n                <tns:ZIPCode>${request.requestor.data.address?.index?:''}</tns:ZIPCode>\r\n                <tns:region>${request.requestor.data.address?.region?:''}</tns:region>\r\n                <tns:city>${request.requestor.data.address?.city?:''}</tns:city>\r\n                <tns:village>${request.requestor.data.address?.town?:''}</tns:village>\r\n                <tns:street>${request.requestor.data.address?.street?:''}</tns:street>\r\n                <tns:house>${request.requestor.data.address?.house?:''}</tns:house>\r\n                <tns:block>${request.requestor.data.address?.building?:''}</tns:block>\r\n                <tns:flat>${request.requestor.data.address?.flat?:''}</tns:flat>\r\n            </tns:address>\r\n            <tns:factAddress>\r\n                <tns:ZIPCode>${request.requestor.data.factAddress?.index?:''}</tns:ZIPCode>\r\n                <tns:region>${request.requestor.data.factAddress?.region?:''}</tns:region>\r\n                <tns:city>${request.requestor.data.factAddress?.city?:''}</tns:city>\r\n                <tns:village>${request.requestor.data.factAddress?.town?:''}</tns:village>\r\n                <tns:street>${request.requestor.data.factAddress?.street?:''}</tns:street>\r\n                <tns:house>${request.requestor.data.factAddress?.house?:''}</tns:house>\r\n                <tns:block>${request.requestor.data.factAddress?.building?:''}</tns:block>\r\n                <tns:flat>${request.requestor.data.factAddress?.flat?:''}</tns:flat>\r\n            </tns:factAddress>\r\n            <tns:phone>${requestor.data.phone?:''}</tns:phone>\r\n            <tns:fax>${requestor.data.fax?:''}</tns:fax>\r\n            <tns:eMail>${requestor.data.email?:''}</tns:eMail>    \r\n\t\t${Representative}\r\n\t\t${contextData}\t\r\n\t\t\t\r\n        </tns:applicantDataUl>\r\n    </tns:IQEpguVlgUSL24${typeRequestor}>\r\n    </fed:FormData>\r\n    \"\"\";\r\n}\r\n\r\nctx.request_xml = \"\"\"\r\n<fed:Data xmlns:fed='http://smev.gosuslugi.ru/request/fed/rev120528'>\r\n            ${xml_test} \r\n</fed:Data>\r\n\"\"\";\r\ndef size = 0;\r\n\r\nif(request.data.registry && request.data.registry.applied_documents){\r\n\trequest.data.applied_documents.each{file->\r\n\t\tif(file.load_doc_1){\r\n\t\t\t//\u043F\u043E\u043B\u0443\u0447\u0430\u0435\u043C \u0438\u043C\u044F \u0444\u0430\u0439\u043B\u0430 \u0438\u0437 \u043C\u0435\u0442\u0430\u0434\u0430\u043D\u043D\u044B\u0445\r\n\t\t\tdef name = \"\";\r\n\t\t\tcom.pgg.s1.core.storage.FileStorage.getInstance().readFile(\"default\",file.load_doc_1.id,{is,meta->\r\n\t\t\t\tname = meta.name;\r\n\t\t\t});\r\n\t\t\t//\u0434\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u0438\u0434\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u043E\u0440 \u0444\u0430\u0439\u043B\u0430+\u0438\u043C\u044F \u0432 \u0441\u043F\u0438\u0441\u043E\u043A\r\n\t\t\tctx.files.add([group:\"default\",id:file.load_doc_1.id,name:\"\"]) \r\n            size = size + file.load_doc_1.size;\r\n        }\r\n    }\r\n    if (size > 5000000){\r\n        throw new Exception(\"\u041E\u0431\u0449\u0438\u0439 \u0440\u0430\u0437\u043C\u0435\u0440 \u043F\u0440\u0438\u043A\u0440\u0435\u043F\u043B\u044F\u0435\u043C\u044B\u0445 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u043E\u0432 (\"+size+\" \u0431\u0430\u0439\u0442) \u043F\u0440\u0435\u0432\u044B\u0448\u0430\u0435\u0442 5\u041C\u0431.\");\r\n    }\r\n}\r\n"},"format":"com.pgg.interdept.format.MR255Format","date":"/Date(1392053339984)/","procedures":[{"serviceTitle":"\u0413\u043E\u0441\u0443\u0434\u0430\u0440\u0441\u0442\u0432\u0435\u043D\u043D\u0430\u044F \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F","serviceId":"3400000010000260215","procedureTitle":"\u0413\u043E\u0441\u0443\u0434\u0430\u0440\u0441\u0442\u0432\u0435\u043D\u043D\u0430\u044F \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F \u043F\u043E \u0437\u0430\u044F\u0432\u043B\u0435\u043D\u0438\u044E \u0441\u0443\u043F\u0440\u0443\u0433\u043E\u0432, \u0441\u043E\u0441\u0442\u043E\u044F\u0449\u0438\u0445 \u0432 \u0431\u0440\u0430\u043A\u0435","deptTitle":"\u041E\u0442\u0434\u0435\u043B \u0437\u0430\u043F\u0438\u0441\u0438 \u0430\u043A\u0442\u043E\u0432 \u0433\u0440\u0430\u0436\u0434\u0430\u043D\u0441\u043A\u043E\u0433\u043E \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u044F \u0430\u043F\u043F\u0430\u0440\u0430\u0442\u0430 \u0413\u0443\u0431\u0435\u0440\u043D\u0430\u0442\u043E\u0440\u0430 \u0438  \u041F\u0440\u0430\u0432\u0438\u0442\u0435\u043B\u044C\u0441\u0442\u0432\u0430 \u0412\u043E\u043B\u0433\u043E\u0433\u0440\u0430\u0434\u0441\u043A\u043E\u0439 \u043E\u0431\u043B\u0430\u0441\u0442\u0438","deptId":"3400000010000021206","procedureId":"3400000010000260940"}],"endpoint":"http://172.25.1.11:80/epgu-2-5","id":"3400000010000260940","_state":"present","title":"24 \u041F\u0440\u0438\u0435\u043C \u043F\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0445 \u0437\u0430\u044F\u0432\u043B\u0435\u043D\u0438\u0439 \u043D\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044E \u0430\u043A\u0442\u043E\u0432 \u0433\u0440\u0430\u0436\u0434\u0430\u043D\u0441\u043A\u043E\u0433\u043E \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u044F. \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F.","address":"http://37.200.122.69:8280/services/shuffleVolgograd.01","required":{"citizen":{"factAddress":false,"inn":true,"phone":true,"email":true,"address":true,"snils":true,"birthDate":true,"passport":true,"birthPlace":true},"organization":{"factAddress":true,"inn":true,"address":true,"ogrn":true,"contacts":true}},"user":{"id":"user_4bb7f0ac-a9df-4349-9240-5120e222974f"}},"success":true}